## JUnit
默认的runner是`BlockJUnit4ClassRunner`。
只能测试有返回值（包括异常）的方法。
没有返回值的方法需要使用Mockito库
### 原理
责任链模式
```java
 protected Statement methodBlock(FrameworkMethod method) {  
    Object test;  
    try {  
        test = new ReflectiveCallable() {  
            @Override  
            protected Object runReflectiveCall() throws Throwable {  
                return createTest();  
            }  
        }.run();  
    } catch (Throwable e) {  
        return new Fail(e);  
    }  
  
    //测试方法
    Statement statement = methodInvoker(method, test);
    //@Test(expected = NullPointerException.class)
    statement = possiblyExpectingExceptions(method, test, statement);
    //@Test(timeout = 600)
    statement = withPotentialTimeout(method, test, statement);
    //@Before
    statement = withBefores(method, test, statement);
    //@After
    statement = withAfters(method, test, statement);
    //Rule
    statement = withRules(method, test, statement);
    return statement;  
}  
```

### @Ignore
忽略某个测试
### @BeforeClass/@AfterClass
在所有测试方法执行之前 / 后执行，被注解的方法必须是public，static，无返回值，无参数；
### @Before/@After
在每个测试方法执行之前 / 后执行，被注解的方法必须是public，无返回值，无参数；
### @Test
- `@Test(expected = NullPointerException.class)`如果不抛出空指针则失败
- `@Test(timeout = 600)`执行时间超过600ms则失败

### test suites（测试套件）
按顺序执行一组测试。测试套件可以嵌套。

### Parameter-参数化测试

### @Rule/@ClassRule
@ClassRule作用在类上，注解字段是public static的；@Rule作用在方法上
#### TestName
取的测试方法的名称
#### TemporaryFolder
生成临时文件或文件夹
#### ErrorCollector
收集多个错误信息，最后一同打印
#### Timeout
设置超时时间，对所有测试方法起作用
#### Verifier
测试方法执行之后，做一些校验，对所有测试方法起作用。
可以配合TestName对测试方法做区分
#### ExpectedException
更加灵活的异常测试
#### 自定义规则LoopRule

### @Theory-更灵活的参数化测试

### Assume
当条件不满足时，会跳过当前测试。相当于continue

---
## Mockito
使用自定义的Runner：`@RunWith(MockitoJUnitRunner.class)`
一切围绕mock对象进行操作
### @Mock
修饰字段
同mock方法，构造空实现的对象，所有字段为初始值，所有方法为空实现。
### @Spy
修饰字段
同spy方法，构造真实实现的对象
### verify
验证方法是否被调用过。mock的对象才可以验证，直接new的不行。
### 修改方法返回值
### 参数匹配器
可以自定义
注意：要么都用确定值，要么都用匹配器

---
## PowerMockito